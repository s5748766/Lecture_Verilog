# ğŸ§© Digilent Basys3 Verilog ìˆœì°¨íšŒë¡œ ëª¨ë¸ë§

## ğŸ¯ í•™ìŠµëª©í‘œ
- ëª¨ë¸ë§ì˜ ê¸°ë³¸ ë‹¨ìœ„ì¸ **ëª¨ë“ˆ**ì„ ì´í•´í•œë‹¤.  
- ëŒ€í‘œì ì¸ **ìˆœì°¨íšŒë¡œ**ë¥¼ ëª¨ë¸ë§í•  ìˆ˜ ìˆë‹¤.  
- **ìœ í•œìƒíƒœë¨¸ì‹ (FSM)** ì˜ ê°œë…ì„ ì´í•´í•œë‹¤.  
- **Mealy FSM** ê³¼ **Moore FSM** ì˜ ì°¨ì´ë¥¼ ì´í•´í•œë‹¤.  
- Mealy/Moore FSMì„ **Verilog**ë¡œ ëª¨ë¸ë§í•  ìˆ˜ ìˆë‹¤.  

---

## ğŸ“š ëª©ì°¨
1. [ìˆœì°¨íšŒë¡œ ê°œìš”](#1-ìˆœì°¨íšŒë¡œcombinational-circuit)
2. [ë˜ì¹˜ì™€ í”Œë¦½í”Œë¡­](#2-ë˜ì¹˜ì™€-í”Œë¦½í”Œë¡­)
3. [ì‹œí”„íŠ¸ ë ˆì§€ìŠ¤í„°](#3-ì‹œí”„íŠ¸-ë ˆì§€ìŠ¤í„°)
4. [ì¹´ìš´í„°](#4-ì¹´ìš´í„°)
5. [ì£¼íŒŒìˆ˜ ë¶„ì£¼ê¸°](#5-ì£¼íŒŒìˆ˜-ë¶„ì£¼ê¸°)
6. [7-ì„¸ê·¸ë¨¼íŠ¸ ë””ì½”ë”/ë“œë¼ì´ë²„](#6-7-ì„¸ê·¸ë¨¼íŠ¸-ë””ì½”ë”)
7. [ìœ í•œìƒíƒœë¨¸ì‹ (FSM)](#7-ìœ í•œìƒíƒœë¨¸ì‹ fsm)

---

## 1. ìˆœì°¨íšŒë¡œ(Combinational circuit)

### â–¶ ìˆœì°¨íšŒë¡œ
- ì‹œê°„ì˜ íë¦„ì— ë”°ë¼ **ìƒíƒœ(state)** ê°€ ë³€í•¨  
- ìƒíƒœëŠ” **ê³¼ê±° ìƒíƒœ + í˜„ì¬ ì…ë ¥**ì˜ ì¡°í•©ìœ¼ë¡œ ê²°ì •  
- **ê¸°ì–µì†Œì O** (ìƒíƒœ ë ˆì§€ìŠ¤í„°, ì¹´ìš´í„°, íƒ€ì´ë¨¸)

<img width="400" height="300" alt="001" src="https://github.com/user-attachments/assets/d0993c26-6f03-421e-a8a3-d16f5084b2cb" />
<br>
### â–¶ ë™ê¸°ì‹ ìˆœì°¨íšŒë¡œ
- **í´ë¡ì˜ ì—£ì§€**ì—ì„œë§Œ ìƒíƒœ ì „ì´
- ì…ì¶œë ¥, ì €ì¥, ë°ì´í„° ì²˜ë¦¬
- ëª…í™•í•œ ì‹œê°„ ê°„ê²©ì— ë”°ë¼ ì¶œë ¥ì´ ë³€í•¨

### â–¶ ë¹„ë™ê¸°ì‹ ìˆœì°¨íšŒë¡œ
- í´ë¡ê³¼ ë¬´ê´€í•˜ê²Œ **ì„ì˜ ì‹œì ì˜ ì…ë ¥**ì„ ë°˜ì˜
- ì‹œê°„ ê°„ê²©ê³¼ ë¬´ê´€
â€“ ì…ë ¥ì´ ë³€í™”í•  ë•Œ ì¶œë ¥ì´ ë³€í•¨

<img width="400" height="300" alt="002" src="https://github.com/user-attachments/assets/dae7d078-a8fb-4d73-879c-59b4c06bcd25" />
<br>
### â–¶ í´ë¡(Clock) & í„ìŠ¤(Pulse)
- ë ˆë²¨(level): High/Lowì˜ ì•ˆì • êµ¬ê°„  
- ì—£ì§€(edge): ë ˆë²¨ ë³€í™” ì‹œì  (â†‘/â†“)  
- ë“€í‹°ì‚¬ì´í´: í•œ ì£¼ê¸° ì¤‘ Highì˜ ë¹„ìœ¨

### â–¶ í´ë¡(Clock)
- ë ˆë²¨(level): í´ë¡ì˜ ì•ˆì •ì ì¸ ë…¼ë¦¬ìƒíƒœ, High(1), Low(0)
- ì—£ì§€(edge): ë ˆë²¨ì´ ë³€í™”í•˜ëŠ” ì‹œì , Low->High, High->Low
- íŠ¸ë¦¬ê±°(trigger): ë³€í™”ë¥¼ ìœ ë°œí•˜ëŠ” ê³„ê¸°, ì—£ì§€ì™€ í•¨ê»˜ ì‚¬ìš©

<img width="500" height="300" alt="003" src="https://github.com/user-attachments/assets/4612417f-f3a2-412c-823a-6cc1bf091920" />
<br>
<img width="500" height="300" alt="004" src="https://github.com/user-attachments/assets/f725db72-f413-4966-9acc-9927e3c94944" />
<br>

### â–¶ í„ìŠ¤ ì‹ í˜¸(Pulse signal)
- ìˆœê°„ì ìœ¼ë¡œ ê¸‰ê²©íˆ ë³€í™”í•˜ì—¬ ì§§ì€ ì‹œê°„ ë™ì•ˆ ì§€ì†ë˜ëŠ” ì‹ í˜¸
- ë…¼ë¦¬ìƒíƒœ High(1)ì™€ LOW(0)ê°€ ì¼ì •í•œ ì‹œê°„ ê°„ê²©ìœ¼ë¡œ ë°˜ë³µ
- ì£¼ê¸°ì ì¸ í„ìŠ¤ ì‹ í˜¸->í´ë¡(50%)
- ë“€í‹° ì‚¬ì´í´(duty cycle): í•œ ì£¼ê¸°ì— High ë ˆë²¨ì´ ì°¨ì§€í•˜ëŠ” ì‹œê°„ì  ë¹„ìœ¨
- ì‹œê°„ ì œì–´(ë””ì§€í„¸ íšŒë¡œ ì…ì¶œë ¥, ë°ì´í„° ì²˜ë¦¬, ì´ë²¤íŠ¸)

<img width="500" height="300" alt="005" src="https://github.com/user-attachments/assets/c90b5b20-7084-43b0-8490-d751644c039e" />
<br>
---

## 2. ë˜ì¹˜ì™€ í”Œë¦½í”Œë¡­

### â–¶ ë˜ì¹˜(Latch) vs í”Œë¦½í”Œë¡­(Flip-Flop)
- **ë˜ì¹˜**: ë°ì´í„°ë‚˜ ìƒíƒœë¥¼ ì €ì¥í•˜ëŠ” ê¸°ë³¸ ì¥ì¹˜, ì…ë ¥ ì‹ í˜¸ì— ë”°ë¼ ì¶œë ¥ ìƒíƒœë¥¼ ìœ ì§€, ë ˆë²¨ ê°ì§€ ë°©ì‹, ë¹„ë™ê¸°ì‹, SR ë˜ì¹˜, D ë˜ì¹˜
- **í”Œë¦½í”Œë¡­**: ì •êµí•œ ì €ì¥ ì¥ì¹˜, í´ë¡ ì‹ í˜¸ì˜ íŠ¹ì • ìˆœê°„ ì…ë ¥ ê°’ì„ ë°˜ì˜, ì—£ì§€ ê°ì§€ ë°©ì‹, ë™ê¸°ì‹, ì˜ˆì¸¡ê°€ëŠ¥, ì•ˆì •ì„±, D í”Œë¦½í”Œë¡­, JK í”Œë¦½í”Œë¡­

### â–¶ ë˜ì¹˜ì™€ í”Œë¦½í”Œë¡­ ë¹„êµ
<br>
<img width="500" height="300" alt="006" src="https://github.com/user-attachments/assets/6ee410f3-1733-42bd-a418-63280465c3a7" />
<br>

### â–¶  ê¸°ë³¸ì ì¸ ê¸°ì–µì†Œì (SR ë˜ì¹˜)
<br>
<img width="500" height="300" alt="007" src="https://github.com/user-attachments/assets/2a28b616-d8c4-48c1-9fb9-7436291d85de" />
<br>

### â–¶  ì…ë ¥ì„ ì œì–´í•  ìˆ˜ ìˆëŠ” (SR ë˜ì¹˜)
<br>
<img width="500" height="300" alt="008" src="https://github.com/user-attachments/assets/a33c56ef-657b-4dd7-b69a-59c2e5903a7a" />
<br>

### â–¶  ì…ë ¥ì„ ì œì–´í•  ìˆ˜ ìˆëŠ” (D ë˜ì¹˜)
<br>
<img width="500" height="300" alt="009" src="https://github.com/user-attachments/assets/997b8478-3f07-482f-98f9-d9a40bcffd89" />
<br>

### ğŸ’» D Latch
```verilog
module dlatch(input G, input d, output reg q);
  always @(G or d) begin
    if (G) q <= d;
    else   q <= q;
  end
endmodule
```

#### ğŸ§ª D Latch Testbench
```verilog
`timescale 1ns/1ps
module tb_dlatch;
  reg clk, d;
  wire q;
  dlatch U0(.G(clk), .d(d), .q(q));

  initial begin
    clk = 1'b0;
    forever #10 clk = ~clk;
  end

  initial begin
    d = 0;
    #15 d = 1;  #20 d = 0; #10 d = 1; #10 d = 0; #10 d = 1; #15 d = 0;
  end
endmodule
```
<img width="500" height="300" alt="010" src="https://github.com/user-attachments/assets/1e2e14fe-5b4d-4299-b440-3e01b4a5f994" />

### ğŸ’» D Flip-Flop (ì•ˆí‹°íŒ¨í„´ vs ê¶Œì¥)
- RS-ë˜ì¹˜ì˜ Gì— í´ëŸ­(clk) ì‚¬ìš©
- ì…ë ¥ Rê³¼ Së¥¼ ë¬¶ì–´ Dë¼ëŠ” ê¸°í˜¸ ì‚¬ìš©
- ì…ë ¥ R ë˜ëŠ” S ì¤‘ í•˜ë‚˜ë¥¼ ì¸ë²„í„°ë¡œ ì—°ê²°í•˜ì—¬ ì…ë ¥ìœ¼ë¡œ ì‚¬ìš©

ì•ˆí‹°íŒ¨í„´: q_barê¹Œì§€ ê°™ì€ `always` ë¸”ë¡ì—ì„œ ê°±ì‹  â†’ **ë¶ˆí•„ìš”í•œ FF ì¦ê°€**

<img width="300" height="200" alt="011" src="https://github.com/user-attachments/assets/f46c553d-f7b0-4f9b-a3d7-6f707469fac0" />
<br>
<img width="300" height="200" alt="012" src="https://github.com/user-attachments/assets/b3740ada-5dd7-49fc-94be-18d9072bd6e1" />
<br>

```verilog
module d_ff_bad1(input clk, input d, output reg q, output reg q_bar);
  always @(posedge clk) begin
    q     <= d;
    q_bar <= ~d;
  end
endmodule
```
### ğŸ’» D í”Œë¦½í”Œë¡­ì˜ Edge Detector
<img width="500" height="300" alt="013" src="https://github.com/user-attachments/assets/281edbb0-4d8f-4104-a503-c4f3562033c6" />
<br>
### ğŸ’» qì™€ q_ ì¶œë ¥ì„ ê°–ëŠ” Positive edge-triggered D í”Œë¦½í”Œë¡­

<img width="500" height="100" alt="014" src="https://github.com/user-attachments/assets/de0a0005-4083-488e-b5c8-4a66e74b61d2" />
<br>
```verilog
module d_ff_bad1(clk, d, q, q_bar); input  d, clk;
output q, q_bar;
reg    q, q_bar;
always @(posedge clk) begin
q     <= d;  // q = d;
q_bar <= ~d; // q_ = ~d;
end
endmodule
```

```verilog
module d_ff_good(clk, d, q, q_bar); input  d, clk;
output q, q_bar;
reg    q;
// using assign statement for q_bar
assign q_bar = ~q;
always @(posedge clk) q <= d;
endmodule
```
   * í•˜ë‚˜ì˜ alwaysë¬¸ì— qì™€ q_ ì¶œë ¥ì„ ëª¨ë‘ ê°–ë„ë¡ ì„¤ê³„í•  ê²½ìš° 2ê°œì˜ FFì´ ì‚¬ìš©ë˜ë¯€ë¡œ ë¹„íš¨ìœ¨ì  ì„¤ê³„
     â†’ q_ëŠ” always ë¬¸ ì™¸ë¶€ì— assignë¬¸ì„ ì‚¬ìš©í•˜ì—¬ ìƒì„±


### ğŸ’» qì™€ q_ ì¶œë ¥ì„ ê°–ëŠ” Positive edge-triggered D í”Œë¦½í”Œë¡­ì˜ í•©ì„±ê²°ê³¼ ë¹„êµ
   * í•˜ë‚˜ì˜ alwaysë¬¸ì— qì™€ q_ ì¶œë ¥ì„ ëª¨ë‘ ì„¤ê³„í•œ ê²½ìš°
   * í•˜ë‚˜ì˜ alwaysë¬¸ì— qì¶œë ¥ë§Œ ê¸°ìˆ í•˜ê³  ì™¸ë¶€ assignë¬¸ì— q_ ì¶œë ¥ì„ ê¸°ìˆ í•˜ì—¬ ì„¤ê³„í•œ ê²½ìš°
   
<img width="500" height="300" alt="015" src="https://github.com/user-attachments/assets/8e8655e7-ffae-4c41-8dff-d3cbd692962e" />

   * ê¶Œì¥: `q_bar`ëŠ” `assign`ìœ¼ë¡œ ì™¸ë¶€ì—ì„œ ìƒì„±

```verilog
module d_ff_good(input clk, input d, output reg q, output q_bar);
  assign q_bar = ~q;
  always @(posedge clk) q <= d;
endmodule
```

### ğŸ’» ë‹¤ìŒ ìƒìŠ¹ì—£ì§€ íŠ¸ë¦¬ê±° D-FFì„ ëª¨ë¸ë§ í•´ë³´ì.
  - ê²Œì´íŠ¸ í”„ë¦¬ë¯¸í‹°ë¸Œ, if ë¬¸ ë‘ ê°€ì§€ ë°©ë²•ìœ¼ë¡œ ëª¨ë¸ë§ í•˜ë¼.

<img width="500" height="300" alt="016" src="https://github.com/user-attachments/assets/c5353f2d-1a88-4165-9719-b81af4849c29" />
<br>
<img width="500" height="234" alt="017" src="https://github.com/user-attachments/assets/f5b4791d-4362-4fe0-9a50-f57ed7d0df70" />
<br>

â–¶ ê²Œì´íŠ¸ í”„ë¦¬ë¯¸í‹°ë¸Œë¥¼ ì‚¬ìš©í•œ D-FF ëª¨ë¸ë§
```verilog
module d_ff (
  iCLK,          // Active-High í´ë¡(CLK)
  iCLEARn,       // Active-Low ì‹œìŠ¤í…œ í´ë¦¬ì–´(CLRN)
  iPRESETn,      // Active-Low í”„ë¦¬ì…‹(PRE)
  iD,            // D-FFì˜ ì…ë ¥(D)
  oQ,            // D-FFì˜ ì¶œë ¥(Q)
  oQn);          // D-FFì˜ ë°˜ì „ ì¶œë ¥(Q)

  input     iCLK, iCLEARn, iPRESETn;
  input     iD;
  output    oQ, oQn;

  wire      w0, w1, w2, w3;       // 1ë¹„íŠ¸ netí˜•ìœ¼ë¡œ ìƒëµ ê°€ëŠ¥

  // ê²Œì´íŠ¸ í”„ë¦¬ë¯¸í‹°ë¸Œë¥¼ ì´ìš©í•œ D-FFì˜ ê²Œì´íŠ¸ ìˆ˜ì¤€ ëª¨ë¸ë§
  nand  U0 (w0, iPRESETn, w3, w1);  
  nand  U1 (w1, w0, iCLK, iCLEARn);
  nand  U2 (w2, w1, iCLK, w3);
  nand  U3 (w3, w2, iD, iCLEARn);
  nand  U4 (oQ, w1, oQn, iPRESETn);
  nand  U5 (oQn, oQ, w2, iCLEARn);
endmodule
```

### ğŸ’» if ë¬¸ê³¼ ë…¼ë¸”ë¡í‚¹ í• ë‹¹ë¬¸ì„ ì‚¬ìš©í•œ D-FF ëª¨ë¸ë§
```verilog
module d_ff (
  iCLK,          // Active-High í´ë¡(CLK)
  iCLEARn,       // Active-Low ì‹œìŠ¤í…œ í´ë¦¬ì–´(CLRN)
  iPRESETn,      // Active-Low í”„ë¦¬ì…‹(PRE)
  iD,            // D-FFì˜ ì…ë ¥(D)
  oQ,            // D-FFì˜ ì¶œë ¥(Q)
  oQn);          // D-FFì˜ ë°˜ì „ ì¶œë ¥(Q)

  input     iCLK, iCLEARn, iPRESETn;
  input     iD;
  output    oQ, oQn;

  reg       oQ;         // always ë¬¸ ë‚´ë¶€ì˜ ì™¼ìª½ í• ë‹¹ ì‹ í˜¸ë¥¼ regí˜•ìœ¼ë¡œ ì„ ì–¸

  assign    oQn = ~oQ;  // oQnëŠ” always ë¬¸ë°–ì—ì„œ assignë¬¸ìœ¼ë¡œ í• ë‹¹ë¨

  always @(posedge iCLK or negedge iCLEARn or negedge iPRESETn) begin
    if (!iCLEARn)       // ì‹œìŠ¤í…œ í´ë¦¬ì–´ ë™ì‘
      oQ  <= 0;        // ìˆœì°¨íšŒë¡œì´ë¯€ë¡œ ë…¼ë¸”ë¡í‚¹ í• ë‹¹ë¬¸ ì‚¬ìš© else if (!iPRESETn) // í”„ë¦¬ì…‹ ë™ì‘
      oQ  <= 1;        // ìˆœì°¨íšŒë¡œì´ë¯€ë¡œ ë…¼ë¸”ë¡í‚¹ í• ë‹¹ë¬¸ ì‚¬ìš© else                // ì €ì¥ ë™ì‘
      oQ  <= iD;       // ìˆœì°¨íšŒë¡œì´ë¯€ë¡œ ë…¼ë¸”ë¡í‚¹ í• ë‹¹ë¬¸ ì‚¬ìš©
    end

endmodule
```
### ğŸ’» if ë¬¸ê³¼ ë…¼ë¸”ë¡í‚¹ í• ë‹¹ë¬¸ì„ ì‚¬ìš©í•œ D-FF ëª¨ë¸ë§
```verilog
  reg     oQ, oQn;  // oQnì„ regí˜•ìœ¼ë¡œ ì¶”ê°€ ì„ ì–¸

  always @(posedge iCLK or negedge iCLEARn or negedge iPRESETn) begin
    if (!iCLEARn) begin       
      oQ  <= 0;
      oQn <= 0;
    end
    else if (!iPRESETn) begin
      oQ  <= 1;
      oQn <= 0;
    end
    else begin               
      oQ  <= iD;
      oQn < = ~oQ;
    end
  end
endmodule
```

<del>
### ğŸ’» D-FF (ë¹„ë™ê¸° í´ë¦¬ì–´/í”„ë¦¬ì…‹ í¬í•¨) â€“ if + ë…¼ë¸”ë¡í‚¹
```verilog
module d_ff(
  input iCLK, input iCLEARn, input iPRESETn,
  input iD, output reg oQ, output oQn
);
  assign oQn = ~oQ;
  always @(posedge iCLK or negedge iCLEARn or negedge iPRESETn) begin
    if (!iCLEARn)       oQ <= 1'b0;
    else if (!iPRESETn) oQ <= 1'b1;
    else                oQ <= iD;
  end
endmodule
```
</del>


#### ğŸ§ª D-FF Testbench
```verilog
`timescale 1ns/1ps
module tb_d_ff;
  reg iCLK, iCLEARn, iPRESETn, iD;
  wire oQ, oQn;

  d_ff U0(.iCLK(iCLK), .iCLEARn(iCLEARn), .iPRESETn(iPRESETn), .iD(iD), .oQ(oQ), .oQn(oQn));

  initial begin
    iCLK = 0;
    forever #50 iCLK = ~iCLK;
  end

  initial begin
    iCLEARn = 1; iPRESETn = 1; iD = 0; #50;  
    iCLEARn = 0; iPRESETn = 1; iD = 0; #30;    // system clear
    iCLEARn = 1; iPRESETn = 0; iD = 0; #30;    // preset
    iCLEARn = 1; iPRESETn = 1; iD = 0; #100;   // set and hold
    iCLEARn = 1; iPRESETn = 1; iD = 1; #100;   // set and hold
    iCLEARn = 1; iPRESETn = 1; iD = 0; #100;   // set and hold
    iCLEARn = 1; iPRESETn = 1; iD = 1; #100;   // set and hold
    iCLEARn = 1; iPRESETn = 1; iD = 0; #100;   // set and hold
    $stop;
  end
endmodule
```

<img width="500" height="268" alt="018" src="https://github.com/user-attachments/assets/9f155050-03af-4505-965d-b9f5b333b400" />
<br>

â–¶ ğŸ’» ìƒìŠ¹ì—£ì§€ íŠ¸ë¦¬ê±° JK-FFì„ ëª¨ë¸ë§ í•´ë³´ì.
- ê²Œì´íŠ¸ í”„ë¦¬ë¯¸í‹°ë¸Œ, if ë¬¸ ë‘ ê°€ì§€ ë°©ë²•ìœ¼ë¡œ ëª¨ë¸ë§ í•˜ë¼.

<img width="500" height="237" alt="019" src="https://github.com/user-attachments/assets/957f305d-2892-440e-9964-3ae84f110374" />
<br>
<img width="500" height="171" alt="020" src="https://github.com/user-attachments/assets/2899d2e1-a040-45ac-8f62-d9ab63dd8864" />
<br>

### ğŸ’» ê²Œì´íŠ¸ í”„ë¦¬ë¯¸í‹°ë¸Œë¥¼ ì‚¬ìš©í•œ JK-FF ëª¨ë¸ë§ (D-FF)
```verilog
module d_ff (
  iCLK,          // Active-High í´ë¡(CLK)
  iCLEARn,       // Active-Low ì‹œìŠ¤í…œ í´ë¦¬ì–´(CLRN)
  iPRESETn,      // Active-Low í”„ë¦¬ì…‹(PRE)
  iD,            // D-FFì˜ ì…ë ¥(D)
  oQ,            // D-FFì˜ ì¶œë ¥(Q)
  oQn);          // D-FFì˜ ë°˜ì „ ì¶œë ¥(Q)

  input     iCLK, iCLEARn, iPRESETn;
  input     iD;
  output    oQ, oQn;
  reg       oQ;         // always ë¬¸ ë‚´ë¶€ì˜ ì™¼ìª½ í• ë‹¹ ì‹ í˜¸ë¥¼ regí˜•ìœ¼ë¡œ ì„ ì–¸

  assign    oQn = ~oQ;  // oQnëŠ” always ë¬¸ë°–ì—ì„œ assignë¬¸ìœ¼ë¡œ í• ë‹¹ë¨

  always @(posedge iCLK or negedge iCLEARn or negedge iPRESETn)
  begin
    if (!iCLEARn)       // ì‹œìŠ¤í…œ í´ë¦¬ì–´ ë™ì‘
      oQ  <= 0;        // ìˆœì°¨íšŒë¡œì´ë¯€ë¡œ ë…¼ë¸”ë¡í‚¹ í• ë‹¹ë¬¸ ì‚¬ìš©
    else if (!iPRESETn) // í”„ë¦¬ì…‹ ë™ì‘
      oQ  <= 1;        // ìˆœì°¨íšŒë¡œì´ë¯€ë¡œ ë…¼ë¸”ë¡í‚¹ í• ë‹¹ë¬¸ ì‚¬ìš©
    else                // ì €ì¥ ë™ì‘
      oQ  <= iD;       // ìˆœì°¨íšŒë¡œì´ë¯€ë¡œ ë…¼ë¸”ë¡í‚¹ í• ë‹¹ë¬¸ ì‚¬ìš©
    end
endmodule
```

### ğŸ’» JK-FF â€“ ê²Œì´íŠ¸ í”„ë¦¬ë¯¸í‹°ë¸Œ ê¸°ë°˜(Dë¡œ êµ¬ì„±)
```verilog
module jk_ff(
  input iCLK, input iCLEARn, input iPRESETn,
  input iJ, input iK, output oQ, output oQn
);
  wire w0, w1, w2, w3;
  not  U0(w0, iK);
  nand U1(w1, oQn, iJ);
  nand U2(w2, w0, oQ);
  nand U3(w3, w1, w2);
  d_ff UDFF(.iCLK(iCLK), .iCLEARn(iCLEARn), .iPRESETn(iPRESETn), .iD(w3), .oQ(oQ), .oQn(oQn));
endmodule
```

### ğŸ’» JK-FF â€“ if + ë…¼ë¸”ë¡í‚¹
```verilog
module jk_ff_bhv(
  input iCLK, input iCLEARn, input iPRESETn,
  input iJ, input iK, output reg oQ, output oQn
);
  assign oQn = ~oQ;
  always @(posedge iCLK or negedge iCLEARn or negedge iPRESETn) begin
    if(!iCLEARn)       oQ <= 1'b0;
    else if(!iPRESETn) oQ <= 1'b1;
    else
      case({iJ,iK})
        2'b00: oQ <= oQ;      // hold
        2'b01: oQ <= 1'b0;    // reset
        2'b10: oQ <= 1'b1;    // set
        2'b11: oQ <= ~oQ;     // toggle
      endcase
  end
endmodule
```

#### ğŸ§ª JK-FF Testbench
```verilog
`timescale 1ns/1ps
module tb_jk_ff;
  reg iCLK, iCLEARn, iPRESETn, iJ, iK;
  wire oQ, oQn;

  jk_ff_bhv U0(.iCLK(iCLK), .iCLEARn(iCLEARn), .iPRESETn(iPRESETn), .iJ(iJ), .iK(iK), .oQ(oQ), .oQn(oQn));

  initial begin
    iCLK = 0; forever #50 iCLK = ~iCLK;
  end

  initial begin
    iCLEARn = 1; iPRESETn = 1; iJ = 0; iK = 0; #50;
    iCLEARn = 0; #30;                       // reset
    iCLEARn = 1; iPRESETn = 0; #30;         // preset
    iPRESETn = 1;
    iJ=0;iK=1; #100;  // reset
    iJ=0;iK=0; #100;  // hold
    iJ=1;iK=0; #100;  // set
    iJ=0;iK=0; #100;  // hold
    iJ=0;iK=1; #100;  // reset
    iJ=0;iK=0; #100;  // hold
    iJ=1;iK=1; #200;  // toggle
    $stop;
  end
endmodule
```
<img width="500" height="276" alt="021" src="https://github.com/user-attachments/assets/e2e1032b-eee4-4b6d-bcc8-ec328dfc859b" />
<br>
---

## 3. ì‹œí”„íŠ¸ ë ˆì§€ìŠ¤í„°

### â–¶ ê°œìš”
- ì§ë ¬/ë³‘ë ¬ ì…ì¶œë ¥: **SISO, SIPO, PISO, PIPO**  
- ë²„í¼, ì‹œê°„ì§€ì—°, ë˜ë¨¹ì„ êµ¬ì¡° ë“±
- ì—¬ëŸ¬ ê°œì˜ í”Œë¦½í”Œë¡­ì´ ì§ë ¬ë¡œ ì—°ê²°ëœ êµ¬ì¡°
- ì§ë³‘ë ¬ ì…ì¶œë ¥ì„ ê°–ëŠ” ë””ì§€í„¸ íšŒë¡œ
- SISO, SIPO, PISO, PIPO
- ë²„í¼ íšŒë¡œ, ë°ì´í„° ì €ì¥ íšŒë¡œ, ì‹œê°„ì§€ì—° íšŒë¡œ, ë˜ë¨¹ì„ ì‹œí”„íŠ¸ ë ˆì§€ìŠ¤í„° íšŒë¡œ
- 
<img width="500" height="157" alt="022" src="https://github.com/user-attachments/assets/bc284a2e-783d-4835-aba1-d93cf57b789b" />
<br>

### ğŸ’» SIPO â€“ ì¡°ê±´ì—°ì‚°ì
<br>
<img width="500" height="350" alt="023" src="https://github.com/user-attachments/assets/dfcc84e8-6c2f-4f50-98e2-c1ef0a24295b" />
<br>
```verilog
module sipo(input iCLK, input iRESETn, input iS, output [3:0] oP);
  reg [3:0] p_out;
  assign oP = p_out;
  always @(posedge iCLK or negedge iRESETn) begin
    if (!iRESETn) p_out <= 4'b0;
    else          p_out <= {p_out[2:0], iS};
  end
endmodule
```

### ğŸ’» SIPO â€“ if
```verilog
module sipo_if(input iCLK, input iRESETn, input iS, output [3:0] oP);
  reg [3:0] p_out; assign oP = p_out;
  always @(posedge iCLK or negedge iRESETn) begin
    if (!iRESETn) p_out <= 4'b0;
    else begin
      p_out <= (p_out << 1);
      p_out[0] <= iS;
    end
  end
endmodule
```

### ğŸ§ª SIPO Testbench
```verilog
`timescale 1ns/10ps
module tb_sipo;
  reg iCLK, iRESETn, iS;
  wire [3:0] oP;
  sipo U0(.iCLK(iCLK), .iRESETn(iRESETn), .iS(iS), .oP(oP));

  initial begin
    iCLK = 0; forever #50 iCLK = ~iCLK;
  end

  initial begin
    iRESETn = 1; iS = 0; #100;
    iRESETn = 0; #30;  // reset
    iRESETn = 1;
    iS=0; #100; iS=0; #100; iS=1; #100; iS=0; #100; iS=0; #100; iS=1; #100;
    $stop;
  end
endmodule
```
<img width="500" height="214" alt="024" src="https://github.com/user-attachments/assets/a11e551b-3c95-4bc3-bb95-652cb5063b26" />
<br>

### ğŸ’» PISO â€“ ì¡°ê±´ì—°ì‚°ì

<img width="500" height="500" alt="025" src="https://github.com/user-attachments/assets/1b70c1c0-507c-4c92-b992-5e58737793e9" />
<br>
<img width="500" height="109" alt="026" src="https://github.com/user-attachments/assets/cbdb2498-a36c-4303-96d6-d7bfaaf54c28" />
<br>

```verilog
module piso(input iCLK, input iRESETn, input iLOADn, input [3:0] iP, output oS);
  reg [3:0] q_ff;
  always @(posedge iCLK or negedge iRESETn or negedge iLOADn) begin
    if (!iRESETn)       q_ff <= 4'b0;
    else if (!iLOADn)   q_ff <= iP;
    else                q_ff <= {q_ff[2:0], 1'b0};
  end
  assign oS = q_ff[3];
endmodule
```

### ğŸ’» PISO â€“ if
```verilog
module piso_if(input iCLK, input iRESETn, input iLOADn, input [3:0] iP, output oS);
  reg [3:0] q_ff; assign oS = q_ff[3];
  always @(posedge iCLK or negedge iRESETn or negedge iLOADn) begin
    if (!iRESETn)     q_ff <= 4'b0;
    else if (!iLOADn) q_ff <= iP;
    else begin
      q_ff <= (q_ff << 1);
      q_ff[0] <= 1'b0;
    end
  end
endmodule
```
<img width="500" height="214" alt="027" src="https://github.com/user-attachments/assets/4e3ffaa9-9816-4238-81ff-75642628c946" />

---

## 4. ì¹´ìš´í„°

### â–¶ ë¶„ë¥˜
- ë™ê¸°/ë¹„ë™ê¸°, 2ì§„/10ì§„, ì¦ê°€/ê°ì†Œ ë“±

<img width="500" height="191" alt="028" src="https://github.com/user-attachments/assets/2e428bc8-42e8-4485-869e-fffd615361ba" />
<br>
<img width="500" height="221" alt="029" src="https://github.com/user-attachments/assets/9ee29374-feae-4900-8652-4d6436eb1951" />
<br>

### ğŸ’» ë¹„ë™ê¸°ì‹ 4ë¹„íŠ¸ 2ì§„ ì¦ê°€ ì¹´ìš´í„° (Ripple) â€“ í–‰ìœ„ìˆ˜ì¤€

<img width="500" height="154" alt="030" src="https://github.com/user-attachments/assets/6ca9a30e-97ac-4f6d-83c3-25765aef1d61" />

```verilog
module ripple_upcnt(input iCLK, input iRESETn, output [3:0] oQ);
  reg [3:0] qout; assign oQ = qout;
  always @(negedge iCLK or negedge iRESETn) begin
    if (!iRESETn) qout[0] <= 1'b0; else qout[0] <= ~qout[0];
  end
  always @(negedge qout[0] or negedge iRESETn) begin
    if (!iRESETn) qout[1] <= 1'b0; else qout[1] <= ~qout[1];
  end
  always @(negedge qout[1] or negedge iRESETn) begin
    if (!iRESETn) qout[2] <= 1'b0; else qout[2] <= ~qout[2];
  end
  always @(negedge qout[2] or negedge iRESETn) begin
    if (!iRESETn) qout[3] <= 1'b0; else qout[3] <= ~qout[3];
  end
endmodule
```

#### ğŸ§ª Ripple Counter TB
```verilog
`timescale 1ns/10ps
module tb_ripple_upcnt;
  reg iCLK, iRESETn; wire [3:0] oQ;
  ripple_upcnt U0(.iCLK(iCLK), .iRESETn(iRESETn), .oQ(oQ));
  initial iCLK = 0;
  always #50 iCLK = ~iCLK;
  initial begin
    iRESETn = 1; #100; iRESETn = 0; #100; iRESETn = 1; #2000; $stop;
  end
endmodule
```
<img width="500" height="414" alt="031" src="https://github.com/user-attachments/assets/faf96b8c-deb3-4b41-8742-cf60907c73f3" />
<br>
<img width="500" height="360" alt="032" src="https://github.com/user-attachments/assets/f528d86c-3f2b-4e9f-aba1-cac9fd51eca5" />
<br>

### ğŸ’» ë™ê¸°ì‹ 4ë¹„íŠ¸ ì¦ê°€/ê°ì†Œ ì¹´ìš´í„° â€“ í–‰ìœ„ìˆ˜ì¤€
- ê° FFì˜ ì…ë ¥ -> ê¸°ì¤€ í´ë¡ì— ë™ê¸°í™”
- íšŒë¡œê°€ ë³µì¡, ë™ì‹œ ë™ì‘->ë¹ ë¦„

<img width="500" height="243" alt="033" src="https://github.com/user-attachments/assets/452adb8b-215c-4f0c-a420-0c044cb1b658" />

- êµ¬ì¡°ì  ë°©ë²•, í–‰ìœ„ ìˆ˜ì¤€ ë‘ ê°€ì§€ ë°©ë²•ìœ¼ë¡œ ëª¨ë¸ë§ í•˜ë¼.

<img width="500" height="191" alt="034" src="https://github.com/user-attachments/assets/7b97b4fb-ab18-4602-835d-d5c2a079a962" />

```verilog
module sync_cnt(input iCLK, input iRESETn, input iSEL, output [3:0] oQ);
  reg [3:0] qout; assign oQ = qout;
  always @(posedge iCLK or negedge iRESETn) begin
    if (!iRESETn) qout <= 4'b0;
    else case(iSEL)
      1'b0: qout <= qout - 1; // down
      1'b1: qout <= qout + 1; // up
    endcase
  end
endmodule
```

#### ğŸ§ª Sync Counter TB
```verilog
`timescale 1ns/10ps
module tb_sync_cnt;
  reg iCLK, iRESETn, iSEL; wire [3:0] oQ;
  sync_cnt U0(.iCLK(iCLK), .iRESETn(iRESETn), .iSEL(iSEL), .oQ(oQ));
  initial iCLK = 1; always #50 iCLK = ~iCLK;
  initial begin
    iRESETn = 1; iSEL = 1; #60;
    iRESETn = 0; #80;
    iRESETn = 1; iSEL = 1; #1500;
    iSEL = 0; #1500;
    $stop;
  end
endmodule
```

<img width="640" height="400" alt="035" src="https://github.com/user-attachments/assets/0644b025-2a0e-4741-890c-39d4341d961d" />


### ğŸ’» BCD(0~9) ì¹´ìš´í„° â€“ í–‰ìœ„ìˆ˜ì¤€

<img width="500" height="201" alt="036" src="https://github.com/user-attachments/assets/d5e1c4a6-dc4a-4e80-94ce-05e3de5fe062" />
<br>
<img width="500" height="225" alt="037" src="https://github.com/user-attachments/assets/b6b28fb5-741c-43d1-a265-3408d45e2ccf" />
<br>

### â–¶ Active-High BCD ì¹´ìš´í„° â€“ êµ¬ì¡°ì  ë°©ë²•(JK)

```verilog
module jk_ff (
  iCLK,         // Active-High í´ë¡(CLK)
  iCLEARn,      // Active-Low ì‹œìŠ¤í…œ í´ë¦¬ì–´(CLRN)
  iPRESETn,     // Active-Low í”„ë¦¬ì…‹(PRE)
  iJ,           // JK-FFì˜ ì…ë ¥(J)
  iK,           // JK-FFì˜ ì…ë ¥(K)
  oQ,           // JK-FFì˜ ì¶œë ¥(Q)
  oQn);         // JK-FFì˜ ë°˜ì „ ì¶œë ¥(Q)

  input     iCLK, iCLEARn, iPRESETn;
  input     iJ, iK;
  output   oQ, oQn;

  reg      oQ;

  assign    oQn = ~oQ;

always @(posedge iCLK or negedge iCLEARn or negedge iPRESETn) begin
  if(!iCLEARn)                  // ì‹œìŠ¤í…œ í´ë¦¬ì–´ ë™ì‘
    oQ <= 0;
  else if (!iPRESETn)           // í”„ë¦¬ì…‹ ë™ì‘
    oQ <= 1;
  else 
    case({iJ, iK})
      2'b00   : oQ <= oQ;     // hold      : iJ = 0, iK = 0
      2'b01   : oQ <= 1'b0;   // reset     : iJ = 0, iK = 1
      2'b10   : oQ <= 1'b1;   // set       : iJ = 1, iK = 0
      2'b11   : oQ <= oQn;    // inversion : iJ = 1, iK = 1
      default : oQ <= 1'bz;   // latch ë°©ì§€
    endcase
  end
endmodule
```
### â–¶ Active-High BCD ì¹´ìš´í„° â€“ êµ¬ì¡°ì  ë°©ë²•

```verilog
module sync_bcd_cnt (
  iCLK,      // ê¸°ì¤€ í´ë¡
  iRESETn,   // Active-Low ë¦¬ì…‹(system clear)
  oBCD);     // BCD ì¹´ìš´í„°ì˜ ì¶œë ¥

  input           iCLK, iRESETn;
  output    [3:0] oBCD;
  wire            w0, w1, w2, w3, w4; // ìƒëµ ê°€ëŠ¥
  wire      [3:0] oBCD, oBCDn;     

  jk_ff UFF0 (
    .iCLK       (iCLK), 
    .iCLEARn    (iRESETn), 
    .iPRESETn   (1'b1), 
    .iJ         (1'b1),      // iJ = 1'b1ì´ ì…ë ¥ë¨
    .iK         (1'b1),      // iK = 1'b1ì´ ì…ë ¥ë¨
    .oQ         (oBCD[0]),
    .oQn        (oBCDn[0]));

  jk_ff UFF1 (
    .iCLK       (iCLK), 
    .iCLEARn    (iRESETn), 
    .iPRESETn   (1'b1), 
    .iJ         (1'b1),      // iJ = 1'b1ì´ ì…ë ¥ë¨
    .iK         (1'b1),      // iK = 1'b1ì´ ì…ë ¥ë¨
    .oQ         (oBCD[1]),
    .oQn        (oBCDn[1]));

  jk_ff UFF2 (
    .iCLK       (iCLK), 
    .iCLEARn    (iRESETn), 
    .iPRESETn   (1'b1), 
    .iJ         (1'b1),      // iJ = 1'b1ì´ ì…ë ¥ë¨
    .iK         (1'b1),      // iK = 1'b1ì´ ì…ë ¥ë¨
    .oQ         (oBCD[2]),
    .oQn        (oBCDn[2]));

  jk_ff UFF3 (
    .iCLK       (iCLK), 
    .iCLEARn    (iRESETn), 
    .iPRESETn   (1'b1), 
    .iJ         (1'b1),      // iJ = 1'b1ì´ ì…ë ¥ë¨
    .iK         (1'b1),      // iK = 1'b1ì´ ì…ë ¥ë¨
    .oQ         (oBCD[3]),
    .oQn        (oBCDn[3]));

  and  U0 (w0, oBCD[0], oBCD[3]);
  and  U1 (w1, oBCD[1], oBCD[0]);
  and  U2 (w2, w1, oBCD[2]);
  and  U3 (w3, oBCD[0], oBCD[3]);
  or U4 (w4, w2, w3);

endmodule
```


```verilog
module sync_bcd_cnt(input iCLK, input iRESETn, output [3:0] oBCD);
  reg [3:0] bcd; assign oBCD = bcd;
  always @(posedge iCLK or negedge iRESETn) begin
    if (!iRESETn) bcd <= 4'b0;
    else if (bcd < 4'd9) bcd <= bcd + 1;
    else bcd <= 4'd0;
  end
endmodule
```
### â–¶ ë‹¤ìŒ ë™ê¸°ì‹ Active-High BCD ì¹´ìš´í„°ë¥¼ ëª¨ë¸ë§ í•´ë³´ì.
- êµ¬ì¡°ì  ë°©ë²•, í–‰ìœ„ ìˆ˜ì¤€ ë‘ ê°€ì§€ ë°©ë²•ìœ¼ë¡œ ëª¨ë¸ë§ í•˜ë¼.

<img width="500" height="201" alt="038" src="https://github.com/user-attachments/assets/044be29a-0406-4545-97a1-98d21583a87b" />

---

## 5. ì£¼íŒŒìˆ˜ ë¶„ì£¼ê¸°
â€“ OSCì—ì„œ ë°œìƒí•˜ëŠ” ë†’ì€ ì£¼íŒŒìˆ˜ì˜ í´ë¡ í„ìŠ¤ë¡œë¶€í„° ì›í•˜ëŠ” ë‚®ì€ ì£¼íŒŒìˆ˜ì˜ í´ë¡ ì‹ í˜¸ë¥¼ ìƒì„±í•˜ëŠ” íšŒë¡œ
<br>
<img width="500" height="203" alt="040" src="https://github.com/user-attachments/assets/05485e00-50dd-4e65-a3d1-e6dacb30b5c7" />
<br>

â€“ ë¦¬í”Œ ì¹´ìš´í„°ì²˜ëŸ¼ Nê°œì˜ f/2 ì£¼íŒŒìˆ˜ ë¶„ì£¼ê¸°ë¥¼ ì§ë ¬ë¡œ ì—°ê²°í•˜ë©´ f/2^N ì£¼íŒŒ ìˆ˜ ë¶„ì£¼ê¸°ë¥¼ ëª¨ë¸ë§í•  ìˆ˜ ìˆë‹¤.
<br>
<img width="500" height="183" alt="041" src="https://github.com/user-attachments/assets/1f570558-14ea-46f6-8108-5ea40c9eedb7" />
<br>

â€“ Mod-N(modulo N)ì™€ D-FF ì§ë ¬ ì—°ê²°í•˜ì—¬ f/N ì£¼íŒŒìˆ˜ ë¶„ì£¼ê¸°
<br>
<img width="500" height="244" alt="042" src="https://github.com/user-attachments/assets/993d11df-bc49-4db9-be3b-8e313f750a58" />
<br>

â€“ OSCì—ì„œ ë°œìƒí•˜ëŠ” ë†’ì€ ì£¼íŒŒìˆ˜ì˜ í´ë¡ í„ìŠ¤ë¡œë¶€í„° ì›í•˜ëŠ” ë‚®ì€ ì£¼íŒŒìˆ˜ì˜ í´ë¡ ì‹ í˜¸ë¥¼ ìƒì„±í•˜ëŠ” íšŒë¡œ
<br>
<img width="500" height="238" alt="043" src="https://github.com/user-attachments/assets/050df4fa-1602-41e0-8d6e-32a5051510ae" />
<br>

â€“ 1MHz í´ë¡ìœ¼ë¡œë¶€í„° 1Hz ì£¼íŒŒìˆ˜ì˜ í´ë¡ì„ ìƒì„±í•˜ëŠ” ì£¼íŒŒìˆ˜ ë¶„ì£¼ê¸°
<br>
<img width="500" height="169" alt="044" src="https://github.com/user-attachments/assets/4a69c985-0d21-4657-8a12-f2b58db3fed1" />
<br>

### ğŸ’» ë¶„ì£¼ê¸° â€“ ì›í•˜ëŠ” ì£¼íŒŒìˆ˜ ìƒì„±
```verilog
module freq_div #(parameter WIDTH=19, parameter VAL_CNT=19'd500000)
 (input iCLK, input iRESETn, output oMYCLK);
  reg [WIDTH-1:0] cnt_clk; reg myclk; assign oMYCLK = myclk;
  always @(posedge iCLK or negedge iRESETn) begin
    if (!iRESETn) begin cnt_clk <= 0; myclk <= 1'b1; end
    else if (cnt_clk == VAL_CNT-1) begin cnt_clk <= 0; myclk <= ~myclk; end
    else cnt_clk <= cnt_clk + 1'b1;
  end
endmodule
```

#### ğŸ§ª ë¶„ì£¼ê¸° TB
```verilog
`timescale 1ns/10ps
module tb_freq_div;
  localparam TCLK = 1000;
  reg iCLK, iRESETn; wire oMYCLK;
  freq_div U0(.iCLK(iCLK), .iRESETn(iRESETn), .oMYCLK(oMYCLK));
  initial begin
    iCLK = 1; iRESETn = 1; #50;
    iRESETn = 0; #30;
    iRESETn = 1; #(TCLK*2000000);
    $stop;
  end
  always #(TCLK/2) iCLK = ~iCLK;
endmodule
```

### ğŸ’» Enable ì‹ í˜¸ ìƒì„±ê¸° (ì˜ˆ: 1Hz/200Hz í„ìŠ¤)
```verilog
module enable_sig #(parameter WIDTH=4, parameter VAL_CNT=10)
 (input iCLK, input iRESETn, output oENSIG);
  reg [WIDTH-1:0] cnt; reg en; assign oENSIG = en;
  always @(posedge iCLK or negedge iRESETn) begin
    if(!iRESETn) begin cnt <= 0; en <= 1'b0; end
    else if (cnt == VAL_CNT-1) begin cnt <= 0; en <= 1'b1; end
    else begin cnt <= cnt + 1'b1; en <= 1'b0; end
  end
endmodule
```
<img width="640" height="480" alt="045" src="https://github.com/user-attachments/assets/8a9271c3-53ad-48b9-9752-55ad04f2c9aa" />

---

## 6. 7-ì„¸ê·¸ë¨¼íŠ¸ ë””ì½”ë”

<img width="500" height="220" alt="048" src="https://github.com/user-attachments/assets/d9373be7-3879-4315-9f83-87e2d867dd97" />
<br>
<img width="500" height="231" alt="049" src="https://github.com/user-attachments/assets/9e08a1e5-bb88-4858-8246-299fcacf7614" />
<br>
<img width="500" height="220" alt="050" src="https://github.com/user-attachments/assets/63f50c2a-b306-4c23-b411-f24954c5ec15" />
<br>
<img width="500" height="341" alt="051" src="https://github.com/user-attachments/assets/8b89a0d8-5135-4916-8225-40006f30cf84" />
<br>
<img width="500" height="276" alt="052" src="https://github.com/user-attachments/assets/a305d7e7-0a29-4571-89a2-7dd55d83fa63" />
<br>

### ğŸ’» CC-type 4ìë¦¬ 7-ì„¸ê·¸ë¨¼íŠ¸ ì œì–´ê¸° ëª¨ë“ˆ â€“ í–‰ìœ„ ìˆ˜ì¤€
```verilog
module fnd_controler (
  iCLK,         // í´ë¡ ì‹ í˜¸
  iRESETn,      // Active-Low ë¦¬ì…‹
  iBCD,         // ë””ì½”ë”ì˜ BCD ì…ë ¥
  oCOM_FND,     // FNDì˜ ê³µí†µ ë‹¨ì(ì¶œë ¥)
  oDATA_FND);   // 7-ì„¸ê·¸ë¨¼íŠ¸ í‘œì‹œì¥ì¹˜ì˜ ì œì–´ì‹ í˜¸

  input    iCLK, iRESETn;
  input     [3:0] iBCD;
  output    [3:0] oCOM_FND;
  output    [7:0] oDATA_FND;

  reg       [7:0] data_fnd;

  always @ (posedge iCLK or negedge iRESETn) begin
    if (!iRESETn)
      data_fnd <= 8'b1111_1111;
  else
    case(iBCD) 
      // FND ì œì–´ì‹ í˜¸(0ì¼ ë•Œ ON),  abcd_efgdp,
      4'd0    :  data_fnd   <=   8'b1111_1100;
      4'd1    :  data_fnd   <=   8'b0110_0000;
      4'd2    :  data_fnd   <=   8'b1101_1010;
      4'd3    :  data_fnd   <=   8'b1111_0010;
      4'd4    :  data_fnd   <=   8'b0110_0110;
      4'd5    :  data_fnd   <=   8'b1011_0110;
      4'd6    :  data_fnd   <=   8'b1011_1110;
      4'd7    :  data_fnd   <=   8'b1110_0100;
      4'd8    :  data_fnd   <=   8'b1111_1110;
      4'd9    :  data_fnd   <=   8'b1110_0110;
      default :  data_fnd   <=   8'b1111_1111;
    endcase
  end

  assign oCOM_FND = 4'b0000;
  assign oDATA_FND = data_fnd;

endmodule
```

### â–¶ CC-type 4ìë¦¬ 7-ì„¸ê·¸ë¨¼íŠ¸ ì œì–´ê¸° ëª¨ë“ˆ â€“ í…ŒìŠ¤íŠ¸ë²¤ì¹˜
```verilog
`timescale  1ns/10ps

module  tb_fnd_controler;   
  localparam   TCLK = 100;     // TCLK = 100 * 1ns = 100ns

  reg         iCLK, iRESETn;
  reg   [3:0] iBCD;
  wire  [3:0] oCOM_FND;
  wire  [7:0] oDATA_FND;

  integer     i;

  fnd_controler U0 (
    .iCLK        (iCLK), 
    .iRESETn     (iRESETn),
    .iBCD        (iBCD),
    .oCOM_FND (oCOM_FND),
    .oDATA_FND (oDATA_FND));

  initial   begin
    iCLK = 1; iRESETn = 1; iBCD = 4'd0; #(TCLK/2);
    iRESETn = 0; #(TCLK/2);   // Active-Low reset
    iRESETn = 1; 

    for (i = 0; i < 11; i = i + 1) begin
      #(TCLK);
      if (iBCD == 9)
        iBCD = 4'b0;
      else
        iBCD = iBCD + 4'd1;
      end
      $stop;
    end

  always   #(TCLK/2) iCLK = ~iCLK; // 50nì—ì„œ ë°˜ì „, 10MHz í´ë¡ ìƒì„±

endmodule
```


### ğŸ’» ë‹¨ì¼ ìë¦¬ CCí˜• ë””ì½”ë”
```verilog
module fnd_decoder_cc(input [3:0] iBCD, output reg [7:0] oDATA_FND);
  // abcd_efgdp (0ì´ë©´ LED ON) â€“ CCí˜•
  always @* begin
    case (iBCD)
      4'd0: oDATA_FND = 8'b1111_1100;
      4'd1: oDATA_FND = 8'b0110_0000;
      4'd2: oDATA_FND = 8'b1101_1010;
      4'd3: oDATA_FND = 8'b1111_0010;
      4'd4: oDATA_FND = 8'b0110_0110;
      4'd5: oDATA_FND = 8'b1011_0110;
      4'd6: oDATA_FND = 8'b1011_1110;
      4'd7: oDATA_FND = 8'b1110_0100;
      4'd8: oDATA_FND = 8'b1111_1110;
      4'd9: oDATA_FND = 8'b1110_0110;
      default: oDATA_FND = 8'b1111_1111;
    endcase
  end
endmodule
```
### â–¶ ì„œë¡œ ë‹¤ë¥¸ ìˆ«ìë¥¼ í‘œì‹œí•˜ëŠ” 4ìë¦¬ 7-ì„¸ê·¸ë¨¼íŠ¸(CC) ë™ì‘ â€“ ì”ìƒíš¨ê³¼ -> 20fps -> 80fps

<img width="500" height="403" alt="054" src="https://github.com/user-attachments/assets/a914188f-eb19-45b0-b7bd-66b49e753dd3" />
<br>
<img width="500" height="340" alt="055" src="https://github.com/user-attachments/assets/bc516ab0-a9ca-4217-8bab-824a188bde1e" />
<br>

```verilog
module  counter_4digit (
  iCLK,        // 1MHz ê¸°ì¤€ í´ë¡
  iRESETn,     // Active-Low reset 
  oDATA_FND,   // FND í‘œì‹œë¥¼ ìœ„í•œ 8ë¹„íŠ¸ ë°ì´í„° ì¶œë ¥ ë°ì´í„°
  oCOM_FND);   // FND ìë¦¿ìˆ˜ ì„ íƒì„ ìœ„í•œ ê³µí†µ ë‹¨ì, 4ë¹„íŠ¸ ì¶œë ¥ì‹ í˜¸

  input    iCLK, iRESETn;     
  output   [7:0]  oDATA_FND;   // FND í‘œì‹œë¥¼ ìœ„í•œ ì œì–´ì‹ í˜¸(a ~ dp) ë°ì´í„° output   [3:0]  oCOM_FND;
  wire     en_200;     // FND ì„ íƒì„ ìœ„í•œ 200Hz enable ì‹ í˜¸
  wire     en_1;       // BCD ì¦ê°€ ì¹´ìš´í„°ë¥¼ ìœ„í•œ 1Hz enable ì‹ í˜¸
  wire     [15:0] data_cnt;   // BCD ì¦ê°€ ì¹´ìš´í„°ì˜ ê³„ìˆ˜(counting) ê°’

  freq_div_fnd  UFD (
    .iCLK      (iCLK),
    .iRESETn   (iRESETn), 
    .oEN_200   (en_200),
    .oEN_1     (en_1));

  bcd_cnt  UBCD (
    .iCLK        (iCLK),
    .iRESETn     (iRESETn),
    .iEN_1       (en_1),
    .oDATA_CNT   (data_cnt));

  drv_fnd4  UDRV (
    .iCLK        (iCLK),
    .iRESETn     (iRESETn),
    .iEN_200     (en_200),
    .iBCD        (data_cnt),
    .oCOM_FND    (oCOM_FND),
    .oDATA_FND   (oDATA_FND));

endmodule
```

### â–¶ ì›í•˜ëŠ” ì£¼íŒŒìˆ˜ì˜ í™œì„±í™” ì‹ í˜¸ë¥¼ ìƒì„±í•˜ëŠ” ì£¼íŒŒìˆ˜ ë¶„ì£¼ê¸°
- ê¸°ì¤€ í´ë¡: 1MHz, í™œì„±í™” ì‹ í˜¸: 200Hz, 1Hz

<img width="500" height="363" alt="056" src="https://github.com/user-attachments/assets/f1948e2b-7510-409b-a0a1-02a14016c841" />

```verilog
module freq_div_fnd (
  iCLK,      // 1MHz ê¸°ì¤€ í´ë¡
  iRESETn,   // Active-Low reset
  oEN_200,   // 200Hz í™œì„±í™” ì‹ í˜¸
  oEN_1);    // 1Hz í™œì„±í™” ì‹ í˜¸

  localparam VAL_CNT200 = 13'd5000;    // ì¹´ìš´íŠ¸ ê°’ì„ íŒŒë¼ë¯¸í„° ì„ ì–¸
  localparam VAL_CNT1 = 20'd1000000;  // ì¹´ìš´íŠ¸ ê°’ì„ íŒŒë¼ë¯¸í„° ì„ ì–¸

  input           iCLK, iRESETn;
  output          oEN_200;
  output          oEN_1;

  reg      [12:0] cnt_en_200; // 200Hz í™œì„±í™” ì‹ í˜¸ ìƒì„±ì„ ìœ„í•œ ì¹´ìš´í„°
  reg      [19:0] cnt_en_1;   // 1hz í™œì„±í™” ì‹ í˜¸ ìƒì„±ì„ ìœ„í•œ ì¹´ìš´í„°
  reg             en_200;     // 200Hz í™œì„±í™” ì‹ í˜¸
  reg             en_1;       // 1Hz í™œì„±í™” ì‹ í˜¸

  // 1. Frequency divider(1MHz â†’ 200Hz) : FNDì˜ com ì„ íƒì„ ìœ„í•œ enable signal
  always @ (posedge iCLK or negedge iRESETn)  begin
    if (!iRESETn)  begin    // ë¹„ë™ê¸° ë¦¬ì…‹
      cnt_en_200   <= 0;   // cnt_en_200ëŠ” ë¦¬ì…‹(low, 0) 
      en_200       <= 0;   // en_200ëŠ” ë¦¬ì…‹(low, 0)
    end
    else if (cnt_en_200 == VAL_CNT200 - 1) begin // 1us*5,000 = 0.005sec
      cnt_en_200   <=  0;  // 0.005ì´ˆë§ˆë‹¤ cnt_en_200ëŠ” low(0)ë¡œ ë¦¬ì…‹
      en_200       <=  1;  // 0.005ì´ˆë§ˆë‹¤ en_200ëŠ” 1us ë™ì•ˆ high(1)ë¡œ ì…‹
    end
    else begin
      cnt_en_200   <=  cnt_en_200 + 1'b1;
      en_200       <=  0;  // en_200hz ì‹ í˜¸ low(0) ìœ ì§€
    end
end

// 2. Frequency divider(1MHz â†’ 1Hz) : BCD ì¹´ìš´í„°ë¥¼ ìœ„í•œ enable signal
  always @ (posedge iCLK or negedge iRESETn)  begin
    if (!iRESETn)  begin    // ë¹„ë™ê¸° ë¦¬ì…‹
      cnt_en_1     <= 0;   // cnt_en_1ì€ ë¦¬ì…‹(low, 0)
      en_1         <= 0;   // en_200ëŠ” ë¦¬ì…‹(low, 0)
    end
    else if (cnt_en_1 == VAL_CNT1 - 1)  begin  // 1us * 1,000,000 = 1sec
      cnt_en_1     <= 0;   // 1ì´ˆë§ˆë‹¤ cnt_en_1ì€ low(0)ë¡œ ë¦¬ì…‹
      en_1         <= 1;   // 1ì´ˆë§ˆë‹¤ en_1ì€ 1us ë™ì•ˆ high(1)ë¡œ ì…‹
    end
    else begin
      cnt_en_1     <= cnt_en_1 + 1'b1; en_1         <= 0;          
    end
end

  assign   oEN_200 = en_200;
  assign   oEN_1 = en_1;

endmodule
```

### â–¶ 4ìë¦¬ BCD ì¦ê°€ ì¹´ìš´í„°

<img width="600" height="329" alt="057" src="https://github.com/user-attachments/assets/eace54c6-23f0-470d-977e-285cb041b402" />


```verilog
module bcd_cnt (
iCLK,         // 1MHz ê¸°ì¤€ í´ë¡
iRESETn,      // Active-Low reset
iEN_1,        // 1Hz Enable ì‹ í˜¸
oDATA_CNT);   // 4ìë¦¿ìˆ˜ BCD ì¹´ìš´í„°ì˜ ê³„ìˆ˜ê°’(16ë¹„íŠ¸)
input           iCLK, iRESETn; input           iEN_1;     
output 
reg      
  [15:0] oDATA_CNT;   
[3:0]  arr_cnt [3:0];  // 4ë¹„íŠ¸ ë²¡í„° 4ê°œë¡œ êµ¬ì„±ëœ 4x4 ë°°ì—´
always @ (posedge iCLK or negedge iRESETn)  begin
if (!iRESETn) begin   // ë¹„ë™ê¸°ì‹ 4ìë¦¬ BCD ì¹´ìš´í„°ì˜ ë¦¬ì…‹
arr_cnt[0] <= 0;   // ì¼ì˜ ìë¦¬ BCD ì¹´ìš´í„° ê°’
arr_cnt[1] <= 0;   // ì‹­ì˜ ìë¦¬ BCD ì¹´ìš´í„° ê°’
arr_cnt[2] <= 0;   // ë°±ì˜ ìë¦¬ BCD ì¹´ìš´í„° ê°’
arr_cnt[3] <= 0;   // ì²œì˜ ìë¦¬ BCD ì¹´ìš´í„° ê°’
end
else if (iEN_1 == 1)  // 1. clkì— ë™ê¸°ëœ 1Hz ì‹ í˜¸ë¡œ BCD ì¹´ìš´í„°ê°’ ì¦ê°€ // 2. FNDì— í‘œì‹œí•  BCD ì¹´ìš´íŠ¸ ê°’: ì²œì˜ ìë¦¬, ë°±ì˜ ìë¦¬, ì‹­ì˜ ìë¦¬, ì¼ì˜ ìë¦¬
endmodule
```

```verilog
else if (iEN_1 == 1)  // 1. clkì— ë™ê¸°ëœ 1Hz ì‹ í˜¸ë¡œ BCD ì¹´ìš´í„°ê°’ ì¦ê°€
  casex({arr_cnt[3], arr_cnt[2], arr_cnt[1], arr_cnt[0]})
    {4'h9, 4'h9, 4'h9, 4'h9} :  begin  // 4ìë¦¿ìˆ˜ ì¹´ìš´í„°ê°’ = 9999
      arr_cnt[3] <= 0;
      arr_cnt[2] <= 0;
      arr_cnt[1] <= 0;
      arr_cnt[0] <= 0;
    end
    {4'hx, 4'h9, 4'h9, 4'h9} :  begin  // 4ìë¦¿ìˆ˜ ì¹´ìš´í„°ê°’ = x999
      arr_cnt[3] <= arr_cnt[3] + 4'h1;
      arr_cnt[2] <= 0;
      arr_cnt[1] <= 0;
      arr_cnt[0] <= 0;
    end
    {4'hx, 4'hx, 4'h9, 4'h9} :  begin  // 4ìë¦¿ìˆ˜ ì¹´ìš´í„°ê°’ = xx99
      arr_cnt[3] <= arr_cnt[3];
      arr_cnt[2] <= arr_cnt[2] + 4'h1;
      arr_cnt[1] <= 0;
      arr_cnt[0] <= 0;
    end
    {4'hx, 4'hx, 4'hx, 4'h9} :  begin  // 4ìë¦¿ìˆ˜ ì¹´ìš´í„°ê°’ = xxx9
      arr_cnt[3] <= arr_cnt[3];
      arr_cnt[2] <= arr_cnt[2];
      arr_cnt[1] <= arr_cnt[1] + 4'h1;
      arr_cnt[0] <= 0;
    end
    default                  :  begin
      arr_cnt[3] <= arr_cnt[3];
      arr_cnt[2] <= arr_cnt[2];
      arr_cnt[1] <= arr_cnt[1];
      arr_cnt[0] <= arr_cnt[0] + 4'h1;
    end
  endcase
else begin
    arr_cnt[3] <= arr_cnt[3];
    arr_cnt[2] <= arr_cnt[2];
    arr_cnt[1] <= arr_cnt[1];
    arr_cnt[0] <= arr_cnt[0];
  end
end

  // 2. FNDì— í‘œì‹œí•  BCD ì¹´ìš´íŠ¸ ê°’: ì²œì˜ ìë¦¬, ë°±ì˜ ìë¦¬, ì‹­ì˜ ìë¦¬, ì¼ì˜ ìë¦¬
  assign oDATA_CNT = {arr_cnt[3], arr_cnt[2], arr_cnt[1], arr_cnt[0]};

endmodule
```

### ğŸ’» 4ìë¦¬ CCí˜• ë“œë¼ì´ë²„ (200Hz ë‹¤ì¤‘í™”)
```verilog
module drv_fnd4(input iCLK, input iRESETn, input iEN_200,
                input [15:0] iBCD, output [3:0] oCOM_FND, output [7:0] oDATA_FND);
  reg [1:0] sel;
  reg [3:0] bcd;
  reg [3:0] com;
  wire [7:0] data;

  always @(posedge iCLK or negedge iRESETn) begin
    if (!iRESETn) sel <= 2'b00;
    else if (iEN_200) sel <= sel + 2'b01;
  end

  always @* begin
    case (sel)
      2'd0: begin com = 4'b1110; bcd = iBCD[3:0];   end
      2'd1: begin com = 4'b1101; bcd = iBCD[7:4];   end
      2'd2: begin com = 4'b1011; bcd = iBCD[11:8];  end
      2'd3: begin com = 4'b0117; bcd = iBCD[15:12]; end
    endcase
  end

  fnd_decoder_cc DEC(.iBCD(bcd), .oDATA_FND(data));

  assign oCOM_FND  = com;
  assign oDATA_FND = data;
endmodule
```

### â–¶ 4ìë¦¬ 7-ì„¸ê·¸ë¨¼íŠ¸ ì œì–´ê¸°
â€“ 1MHz ê¸°ì¤€ í´ë¡ì— ë™ê¸° ë˜ì–´ 200Hz ì£¼íŒŒìˆ˜ì˜ í™œì„±í™” ì‹ í˜¸ì— ì˜í•œ ì”ìƒíš¨ ê³¼ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„œë¡œ ë‹¤ë¥¸ 4ìë¦¬ ìˆ«ìë¥¼ í‘œì‹œí•  ìˆ˜ ìˆëŠ” ëª¨ë“ˆ
<br>
<img width="500" height="237" alt="058" src="https://github.com/user-attachments/assets/89455355-ee04-4f8b-874c-16267addee53" />
<br>

```verilog
module drv_fnd4 (
  iCLK,        // 1MHz í´ë¡ ì‹ í˜¸
  iRESETn,     // Active-Low reset
  iEN_200,     // 200Hz í™œì„±í™” ì‹ í˜¸
  iBCD,        // 4ìë¦¬ BCD ì¹´ìš´í„°ì˜ ê³„ìˆ˜ê°’ oCOM_FND,    // FNDì˜ ê³µí†µ ë‹¨ì(ì¶œë ¥)
  oDATA_FND);  // 7-ì„¸ê·¸ë¨¼íŠ¸ í‘œì‹œì¥ì¹˜ì˜ ì œì–´ì‹ í˜¸

  input           iCLK, iRESETn;
  input           iEN_200;
  input    [15:0] iBCD;
  output   [3:0]  oCOM_FND;
  output   [7:0]  oDATA_FND;

  reg      [1:0]  sel_cnt;
  reg      [3:0]  bcd;
  reg      [3:0]  com_fnd;
  reg      [7:0]  data_fnd;

// 1. 7-ì„¸ê·¸ë¨¼íŠ¸ ìë¦¿ìˆ˜ ì„ íƒì„ ìœ„í•œ ì¹´ìš´í„°

// 2. ìë¦¿ìˆ˜ ì„ íƒ ì¹´ìš´í„°ì˜ ê³„ìˆ˜ê°’ì— ë‹¤ë¥¸ 7-ì„¸ê·¸ë¨¼íŠ¸ ê³µí†µ ë‹¨ì ì„ íƒ

// 3. ì„ íƒí•œ ìë¦¿ìˆ˜ì— í‘œì‹œí•  BCD ì¹´ìš´í„°ì˜ ê³„ìˆ˜ê°’

// 4. 7-ì„¸ê·¸ë¨¼íŠ¸ ë””ì½”ë”(CC-Type)    

  assign   oCOM_FND = com_fnd;
  assign   oDATA_FND = data_fnd;

endmodule
```

### â–¶ 4ìë¦¬ 7-ì„¸ê·¸ë¨¼íŠ¸ ì œì–´ê¸° â€“ í…ŒìŠ¤íŠ¸ë²¤ì¹˜
```verilog
`timescale  100ns/10ns
module tb_counter_4digit;   
localparam   TCLK = 10;     // TCLK = 10 * 100ns = 1us

  reg     iCLK, iRESETn;
  wire    [7:0] oDATA_FND;
  wire    [3:0] oCOM_FND;

counter_4digit TOP (
  .iCLK        (iCLK), 
  .iRESETn     (iRESETn),
  .oDATA_FND   (oDATA_FND),
  .oCOM_FND    (oCOM_FND));

  initial   begin
    iCLK = 1; iRESETn = 1; #(TCLK/2);
    iRESETn = 0; #(TCLK/2);         // Active-Low reset
    iRESETn = 1; #(TCLK*5000000);   // 1us * 5,000,000 = 5sec     
    $stop;
  end

  always   #(TCLK/2) iCLK = ~iCLK;   // 0.5usë§ˆë‹¤ ë°˜ì „, 1MHz
endmodule
```


<img width="500" height="293" alt="059" src="https://github.com/user-attachments/assets/7f675446-35a0-44e3-bb65-5e06dc496d09" />

---

## 7. ìœ í•œìƒíƒœë¨¸ì‹ (FSM)

### â–¶ ê°œë… ìš”ì•½
- **FSM**: ìœ í•œ ê°œìˆ˜ì˜ ìƒíƒœ(State)ì™€ ì…ë ¥(Input)ì— ë”°ë¼ **í´ë¡ ì´ë²¤íŠ¸**ë§ˆë‹¤ ìƒíƒœê°€ ì „ì´(Transition)í•˜ë©°, ê·¸ì— ë”°ë¥¸ **ì¶œë ¥(Output)** ì„ ìƒì„±í•˜ëŠ” ìˆœì°¨íšŒë¡œ ëª¨ë¸.
- **Moore**: ì¶œë ¥ì€ **í˜„ì¬ ìƒíƒœ**ë§Œì˜ í•¨ìˆ˜ â†’ íƒ€ì´ë° ì˜ˆì¸¡ ì‰¬ì›€, ê¸€ë¦¬ì¹˜ ì ìŒ.
- **Mealy**: ì¶œë ¥ì€ **í˜„ì¬ ìƒíƒœ + ì…ë ¥**ì˜ í•¨ìˆ˜ â†’ ìƒíƒœ ìˆ˜ê°€ ì¤„ì–´ë“œëŠ” ê²½í–¥, ë°˜ì‘ ë¹ ë¦„.


<img width="500" height="316" alt="062" src="https://github.com/user-attachments/assets/37cde14b-aefd-4d19-983c-4a12792daf70" />
<br>
<img width="500" height="286" alt="060" src="https://github.com/user-attachments/assets/a9f789c3-7d8e-498a-9a75-1029d6bcaa02" />
<br>
<img width="500" height="323" alt="061" src="https://github.com/user-attachments/assets/162bdf34-58bc-4333-9d14-265b8e3d268a" />
<br>


### â–¶ ìƒíƒœ ì¸ì½”ë”© (Encoding)
- **Binary(Compact)**: ìƒíƒœ ìˆ˜ ì ì„ ë•Œ LUT/FF ìì› ì ˆì•½.
- **One-Hot**: ìƒíƒœ ìˆ˜ ë§ì„ ë•Œ ë¹ ë¥´ê³  íƒ€ì´ë° ìœ ë¦¬(Vivado ê¸°ë³¸ ìµœì í™” ëŒ€ìƒ).
- **Gray**: ì¸ì ‘ ìƒíƒœ í•œ ë¹„íŠ¸ë§Œ ë³€í™” â†’ ê¸€ë¦¬ì¹˜ ë¯¼ê° ê²½ë¡œì— ìœ ë¦¬.

> Vivadoì—ì„œ ì¸ì½”ë”© ì§€ì‹œ(ì˜µì…˜):  
> `(* fsm_encoding = "one-hot" *)` / `"sequential"` / `"gray"`

---

### â–¶ ì½”ë”© í…œí”Œë¦¿(ê¶Œì¥ íŒ¨í„´)

#### (A) 3-ë¸”ë¡ íŒŒí˜• (ê°€ì¥ êµê³¼ì„œì )
1) **ìƒíƒœ ë ˆì§€ìŠ¤í„°** : í´ë¡/ë¦¬ì…‹ì—ì„œ í˜„ì¬ ìƒíƒœ ê°±ì‹   
2) **ë‹¤ìŒ ìƒíƒœ ì¡°í•© ë…¼ë¦¬** : `cs`ì™€ ì…ë ¥ìœ¼ë¡œ `ns` ì‚°ì¶œ  
3) **ì¶œë ¥ ì¡°í•© ë…¼ë¦¬** : Moore/Mealy ë°©ì‹ì— ë§ì¶° ì¶œë ¥ ì‚°ì¶œ

```verilog
module fsm_template #(
  parameter USE_ONEHOT = 0
)(
  input  wire iCLK, iRESETn,
  input  wire x,
  output reg  y
);
  // 1) ìƒíƒœ ì„ ì–¸
  typedef enum reg [ (USE_ONEHOT?3:1) :0 ] {
    S0 = (USE_ONEHOT?4'b0001:2'd0),
    S1 = (USE_ONEHOT?4'b0010:2'd1),
    S2 = (USE_ONEHOT?4'b0100:2'd2),
    S3 = (USE_ONEHOT?4'b1000:2'd3)
  } state_t;

  state_t cs, ns;

  // 2) ìƒíƒœ ë ˆì§€ìŠ¤í„°
  always @(posedge iCLK or negedge iRESETn) begin
    if(!iRESETn) cs <= S0;
    else         cs <= ns;
  end

  // 3) ë‹¤ìŒ ìƒíƒœ ì¡°í•© ë…¼ë¦¬
  always @* begin
    ns = cs;
    case (cs)
      S0: ns = x ? S1 : S0;
      S1: ns = x ? S2 : S0;
      S2: ns = x ? S3 : S1;
      S3: ns = x ? S3 : S2;
      default: ns = S0;
    endcase
  end

  // 4) ì¶œë ¥ ì¡°í•© ë…¼ë¦¬(Moore ì˜ˆì‹œ)
  always @* begin
    case (cs)
      S3:     y = 1'b1;
      default:y = 1'b0;
    endcase
  end
endmodule
```

---

### â–¶ ì„¤ê³„ ì²´í¬ë¦¬ìŠ¤íŠ¸
- **ë¦¬ì…‹**: ë¹„ë™ê¸° ë¦¬ì…‹ ì‹œ ë¯¼ê°ë„ ëª©ë¡ì— `negedge iRESETn` í¬í•¨.  
- **ê¸°ë³¸ê°’**: ì¡°í•© always ë¸”ë¡ ì‹œì‘ ì‹œ `ns=cs;` / ì¶œë ¥ ê¸°ë³¸ê°’ ì„¤ì • â†’ **ë˜ì¹˜ ë°©ì§€**.  
- **Mealy ì¶œë ¥ ê¸€ë¦¬ì¹˜**: ê°€ëŠ¥í•˜ë©´ í•œ í´ë¡ ì§€ì—°(ë ˆì§€ìŠ¤í„° ì¶œë ¥)ìœ¼ë¡œ ì•ˆì •í™”.  
- **CDC**: ë‹¤ë¥¸ í´ë¡ ë„ë©”ì¸ì˜ ì…ë ¥ì€ **2-FF ë™ê¸°í™”** í›„ FSMì— ì¸ê°€.  
- **íƒ€ì´ë° ì—¬ìœ **: One-hot ì¸ì½”ë”© ê³ ë ¤, ë¶ˆí•„ìš”í•œ ê¸´ ì¡°í•©ê²½ë¡œ í”¼í•˜ê¸°.  

---

## 7.1 Moore FSM ì˜ˆì œ â€“ ì‹œí€€ìŠ¤ ë””í…í„°(1011, ì¤‘ì²© í—ˆìš©)
```verilog
module seqdet_moore_1011 (
  input  wire iCLK, input wire iRESETn,
  input  wire x,
  output reg  y
);
  typedef enum reg [2:0] {S0, S1, S10, S101, S1011} state_t;
  state_t cs, ns;

  // ìƒíƒœ ë ˆì§€ìŠ¤í„°
  always @(posedge iCLK or negedge iRESETn) begin
    if(!iRESETn) cs <= S0;
    else         cs <= ns;
  end

  // ë‹¤ìŒ ìƒíƒœ ì¡°í•© ë…¼ë¦¬
  always @* begin
    ns = cs;
    case (cs)
      S0   : ns = x ? S1   : S0;
      S1   : ns = x ? S1   : S10;   // '1' ìœ ì§€ or '10'
      S10  : ns = x ? S101 : S0;    // '101' or ë¦¬ì…‹
      S101 : ns = x ? S1011: S10;   // '1011' or '10'
      S1011: ns = x ? S1   : S10;   // overlapping ì²˜ë¦¬
      default: ns = S0;
    endcase
  end

  // ì¶œë ¥(Moore): ìƒíƒœë§Œì˜ í•¨ìˆ˜
  always @* begin
    y = (cs == S1011);
  end
endmodule
```

**Testbench**
```verilog
`timescale 1ns/1ps
module tb_seqdet_moore_1011;
  reg clk, rstn, x; wire y;
  seqdet_moore_1011 DUT(.iCLK(clk), .iRESETn(rstn), .x(x), .y(y));
  initial begin clk=0; forever #5 clk=~clk; end
  task APPLY(input [31:0] bits, input integer n);
    integer i;
    begin
      for(i=n-1;i>=0;i=i-1) begin x = bits[i]; @(posedge clk); end
    end
  endtask
  initial begin
    rstn=0; x=0; repeat(2) @(posedge clk); rstn=1;
    // ...1011... íŒ¨í„´ ë‘ ë²ˆ í¬í•¨
    APPLY(32'b1_0_1_1_1_0_1_1, 8);
    repeat(10) @(posedge clk);
    $stop;
  end
endmodule
```

---

## 7.2 Mealy FSM ì˜ˆì œ â€“ ì‹œí€€ìŠ¤ ë””í…í„°(1011, ë¹„ì¤‘ì²©)
```verilog
module seqdet_mealy_1011_nolap (
  input  wire iCLK, input wire iRESETn,
  input  wire x,
  output reg  y
);
  typedef enum reg [1:0] {S0, S1, S10, S101} state_t;
  state_t cs, ns;

  always @(posedge iCLK or negedge iRESETn) begin
    if(!iRESETn) cs <= S0;
    else         cs <= ns;
  end

  // Mealy: ì¶œë ¥ì´ ì…ë ¥ê³¼ ìƒíƒœì˜ í•¨ìˆ˜ â†’ ì¡°í•©ì—ì„œ ì‚°ì¶œ (ê¸€ë¦¬ì¹˜ ì£¼ì˜)
  always @* begin
    // ê¸°ë³¸ê°’
    ns = cs;
    y  = 1'b0;

    case (cs)
      S0  : begin
              ns = x ? S1 : S0;
            end
      S1  : begin
              ns = x ? S1 : S10;
            end
      S10 : begin
              ns = x ? S101 : S0;
            end
      S101: begin
              if (x) begin
                y  = 1'b1;   // íŒ¨í„´ 1011 ì™„ì„± ì‹œ ê°™ì€ í´ë¡ì— 1
                ns = S0;     // ë¹„ì¤‘ì²©: ì´ˆê¸°í™”
              end else begin
                ns = S10;
              end
            end
      default: ns = S0;
    endcase
  end
endmodule
```

> **ê¸€ë¦¬ì¹˜ ë°©ì§€ íŒ**: `y`ë¥¼ í•œ í´ë¡ ë ˆì§€ìŠ¤í„°ì— ì €ì¥í•´ ì¶œë ¥í•˜ë©´ íŒŒí˜• ì•ˆì •.

---

## 7.3 íƒ€ì´ë¨¸ ê¸°ë°˜ ì‹ í˜¸ë“± ì»¨íŠ¸ë¡¤ëŸ¬ (Moore + Enable íƒ€ì´ë¨¸)
```verilog
module traffic_light (
  input  wire iCLK, input wire iRESETn,
  input  wire en_1hz,                 // 1Hz enable pulse
  output reg  [2:0] NS,               // {R,Y,G}
  output reg  [2:0] EW
);
  typedef enum reg [1:0] {NS_G, NS_Y, EW_G, EW_Y} state_t;
  state_t cs, ns;
  reg [2:0] tcnt; // ì´ˆ ì¹´ìš´í„°(ìµœëŒ€ 3)

  // ìƒíƒœ ë ˆì§€ìŠ¤í„° & ì´ˆ ì¹´ìš´í„°
  always @(posedge iCLK or negedge iRESETn) begin
    if(!iRESETn) begin cs <= NS_G; tcnt <= 0; end
    else begin
      cs <= ns;
      if(en_1hz) begin
        case (cs)
          NS_G, EW_G: tcnt <= (tcnt==3-1) ? 0 : tcnt + 1;  // 3ì´ˆ
          NS_Y, EW_Y: tcnt <= (tcnt==1-1) ? 0 : tcnt + 1;  // 1ì´ˆ
          default:    tcnt <= 0;
        endcase
      end
    end
  end

  // ë‹¤ìŒ ìƒíƒœ ì¡°í•© ë…¼ë¦¬
  always @* begin
    ns = cs;
    case (cs)
      NS_G : ns = (tcnt==3-1 && en_1hz) ? NS_Y : NS_G;
      NS_Y : ns = (tcnt==1-1 && en_1hz) ? EW_G : NS_Y;
      EW_G : ns = (tcnt==3-1 && en_1hz) ? EW_Y : EW_G;
      EW_Y : ns = (tcnt==1-1 && en_1hz) ? NS_G : EW_Y;
      default: ns = NS_G;
    endcase
  end

  // ì¶œë ¥(Moore) â€“ ìƒíƒœë§Œì˜ í•¨ìˆ˜
  always @* begin
    case (cs)
      NS_G: begin NS=3'b001; EW=3'b100; end  // NS:G, EW:R
      NS_Y: begin NS=3'b010; EW=3'b100; end  // NS:Y, EW:R
      EW_G: begin NS=3'b100; EW=3'b001; end  // NS:R, EW:G
      EW_Y: begin NS=3'b100; EW=3'b010; end  // NS:R, EW:Y
      default: begin NS=3'b100; EW=3'b100; end
    endcase
  end
endmodule
```

**1Hz Enable ìƒì„±ê¸°(ì˜ˆ: 50 MHz â†’ 1 Hz)**
```verilog
module en1hz #(parameter CLK=50_000_000) (
  input iCLK, input iRESETn, output reg oEN
);
  localparam DIV = CLK-1;
  reg [$clog2(CLK)-1:0] cnt;
  always @(posedge iCLK or negedge iRESETn) begin
    if(!iRESETn) begin cnt<=0; oEN<=1'b0; end
    else if(cnt==DIV) begin cnt<=0; oEN<=1'b1; end
    else begin cnt<=cnt+1'b1; oEN<=1'b0; end
  end
endmodule
```

**Testbench(ê°„ë‹¨)**
```verilog
`timescale 1ns/1ps
module tb_traffic_light;
  reg clk, rstn; wire en1; wire [2:0] NS, EW;
  en1hz #(.CLK(1_000_000)) EN(.iCLK(clk), .iRESETn(rstn), .oEN(en1)); // TB ê°€ì†ìš© 1MHzâ†’1Hz
  traffic_light DUT(.iCLK(clk), .iRESETn(rstn), .en_1hz(en1), .NS(NS), .EW(EW));
  initial begin clk=0; forever #0.5 clk=~clk; end // 1MHz
  initial begin
    rstn=0; repeat(5) @(posedge clk); rstn=1;
    repeat(20) @(posedge clk); // ìˆ˜ ì´ˆ ê´€ì°°
    $stop;
  end
endmodule
```

---

### â–¶ Mealy vs Moore ì„ íƒ ê°€ì´ë“œ
- **ì†ë„ ìš°ì„  / ìƒíƒœ ìˆ˜ ìµœì†Œ**: Mealy  
- **ì¶œë ¥ ì•ˆì •ì„± / íƒ€ì´ë° ì˜ˆì¸¡**: Moore  
- **ì‹¤ë¬´ íŒ**: Mealyë¼ë„ ë§ˆì§€ë§‰ì— **ë ˆì§€ìŠ¤í„° 1ë‹¨**ì„ í†µê³¼ì‹œì¼œ **ê¸€ë¦¬ì¹˜ ì–µì œ** â†’ Mooreì™€ ìœ ì‚¬í•œ ì•ˆì •ì„± í™•ë³´

---

### âœ… ìš”ì•½ ì²´í¬ë¦¬ìŠ¤íŠ¸
- `ns=cs;` / `y=ê¸°ë³¸ê°’;`ë¡œ ì‹œì‘í•˜ëŠ” ì¡°í•© ë¸”ë¡ â†’ ë˜ì¹˜ ë°©ì§€  
- ë¹„ë™ê¸° ë¦¬ì…‹ ì‹œ **ë¯¼ê°ë„ ëª©ë¡**ê³¼ **ë¦¬ì…‹ í›„ ì´ˆê¸° ìƒíƒœ** ëª…í™•í™”  
- Mealy ì¶œë ¥ì€ ê°€ëŠ¥í•˜ë©´ **ë ˆì§€ìŠ¤í„°ë§**  
- ìƒíƒœ ì¸ì½”ë”©ì€ íƒ€ì´ë°/ìì›ì— ë§ê²Œ **one-hot/compact** ì„ íƒ  
- ì™¸ë¶€ ë¹„ë™ê¸° ì…ë ¥ì€ **2-FF ë™ê¸°í™”** í›„ FSMì— íˆ¬ì…


